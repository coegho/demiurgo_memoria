\chapter{Introdución}
\hyphenation{In-te-re-se}

\section{Os xogos de rol}
Un xogo de rol é un xogo de interpretación no que o conxunto de xogadores vai
desenvolvendo unha narrativa común, interpretando cada un deles a un personaxe
ficticio que inflúe na historia coas súas accións. Un dos participantes asume o
papel de mestre ou director de xogo, que en esencia é  quen ten a
labor de deseñar a historia e fiar os acontecementos, mentres o resto de xogadores
toman decisións en base aos seus personaxes. Cando un xogador pretende facer
algunha acción con risco de fracasar, o éxito ou fracaso da súa acción
determínase mediante unha tirada de dados. Por tanto, podería dicirse que os
xogos de rol no seu concepto son un termo medio entre o teatro e os contacontos.
\par
Debido á pouca homoxeneidade dos xogos de rol a súa orixe concreta é
discutida, mais con frecuencia asúmese que o concepto xurde a partir dos
wargames de miniaturas, xogos de mesa nos que se simulan batallas
empregando figuriñas\cite{gamingasculture}. Co tempo, este tipo de xogos foron
dándolle un maior peso ás características individuais de cada miniatura e ao seu
transfondo, o que levou á aparición dos xogos de rol tal e como os coñecemos
hoxe en día. Un fito importante no mundo dos xogos de rol é a aparición de
Dungeons and Dragons (publicado orixinalmente en 1974), unha das sagas máis
influíntes e de maior éxito comercial, xa que moitos dos xogos que saíron
posteriormente estaban moi influídos por esta.
\par
Non pasou moito tempo ata que este fenómeno se estendeu aos ordenadores,
especialmente na época de internet, o que propiciou que se comezaran a organizar
partidas de rol mediante correo electrónico e posteriormente a través de foros,
o que se pasou a denominar como {\it play-by-post}. Este sistema de rol é
asíncrono, é dicir, os xogadores podían participar en partidas a longo prazo
tendo horarios totalmente distintos: os xogadores enviaban mensaxes explicando o
que pretendían que os seus personaxes fixeran, e o director de xogo respondía co
resultado das súas accións en base a tiradas de dados e outros factores. Este
estilo de xogo aínda existe a día de hoxe, xa que é o que ofrece unha maior
flexibilidade horaria e tamén unha maior flexibilidade de cara á xogabilidade,
posto que os xogadores non están limitados por ningunha norma do sistema: eles
mesmos poden expoñer coas súas palabras o que queren facer no xogo.
\par
Por outra banda, no mundo do software enseguida comezaron a desenvolverse
programas deseñados especificamente para xogar ao rol, no que non era necesario
un director de xogo xa que o propio sistema era o que xestionaba toda a partida;
un exemplo disto é o software MUD (Multi-User Dungeon) e todos os seus
descendentes, sendo o MUD1 (ano 1978) o primeiro mundo virtual
existente\cite{mud}.
Isto tiña o inconveniente de que o xogador só podía tomar decisións prefixadas no
propio sistema e seguir historias totalmente predeseñadas, sen apenas capacidade
de improvisación real; a diferencia dos foros de rol, nos que se mantén a
figura tradicional do director de xogo que ``leva'' a partida.
\par
Finalmente, os xogos de rol serviron de gran fonte de inspiración para o
desenvolvemento de videoxogos, aparecendo o xénero RPG ({\it Role-playing
game}) que conta con numerosas características propias dos xogos de rol, sendo
as máis frecuentes: a creación de personaxes personalizados, a escolla de
habilidades e clases personalizadas, e os sistemas de atributos para mellorar as
capacidades do personaxe no xogo.
\par
A pesar de todo isto, os xogos de rol clásicos de lapis e papel seguen tendo
unha importante popularidade en certos círculos, especialmente entre a xente
nova, e a día de hoxe seguen aparecendo e medrando diversos sistemas de xogo.

\section{Ferramentas informáticas existentes}
Como xa se comentou no apartado anterior, existen diferentes variantes dentro
dos xogos de rol e para cada unha delas hai bastantes ferramentas dispoñibles.
Nomearemos aquí algúns exemplos.
\subsection{Xogo de rol tradicional}
Existen numerosos sistemas de xogo que aínda teñen bastante popularidade a día
de hoxe, pero se se inclúe este apartado aquí é pola existencia de ferramentas
que simulan unha experiencia tradicional de xogo por ordenador. O exemplo máis
paradigmático a día de hoxe é Roll20 \cite{roll20}, unha plataforma de rol que
permite realizar partidas de distintos sistemas de xogo en liña, tales como
Dungeons and Dragons, World of Darkness e mais. Caracterízase por simular unha
partida real en persoa, empregando para isto un mapa, fichas de personaxe e a
posibilidade de empregar webcam. O obxectivo dos creadores é poder xogar ao rol
tendo unha experiencia o máis próxima posible a xogar en persoa con xogadores
reais.

\subsection{Xogo de rol baseado en texto}
Os diversos forks e clons do MUD que foron saíndo co tempo son incontables, mais
é especialmente interesante unha versión de MUD orientada a obxectos coñecida
como LambdaMOO \cite{lambdamoo}. Esta ferramenta é moi semellante ao MUD, pero
engadindo o paradigma orientado a obxectos: todo o que existe no mundo de xogo
son obxectos que interactúan entre si. Á marxe disto, funciona como calquera
outro MUD: primeiro o administrador crea o mundo e as súas relacións, e
posteriormente os xogadores conéctanse ao servidor para interactuar con el pola
súa conta.

\subsection{Xogo de rol play-by-post}
Os xogos de rol do tipo play-by-post, nos que os xogadores se conectan con
diferentes horarios sen unha ferramenta informática que os guíe, xeralmente
empregan para as súas partidas programas non deseñados para tal fin:
grupos de correo, foros, blogues, wikis e redes sociais. Normalmente hai un
director de xogo que dirixe a partida, igual que nos xogos tradicionais, pero
pode non habelo.

\subsection{Videoxogo RPG}
O xénero RPG dos videoxogos ten unha prolífica colección de títulos, tanto xogos
de un só xogador (Dragon Age, Vampire The Masquerade: Bloodlines), como xogos
multixogador masivos (World of Warcraft), caracterizados por integrar nun mesmo
mundo de xogo a miles de xogadores simultaneamente.

\section{Xustificación do proxecto}
Como se puido ver na sección previa, os xogos de rol ofrecen unha variada oferta
de ferramentas e opcións para todos os gustos. Non obstante, analizando o
panorama en detalle pódese apreciar unha notable carencia: non hai ferramentas
informáticas deseñadas para os xogos de rol play-by-post, isto é, os xogos de
rol habitualmente realizados a través de foros. Habitualmente, nestes casos ao
que se tende é a empregar un director de xogo que organice a partida e
administre a rede na que se realiza a mesma, que pola súa parte terá que ter na
súa cabeza o estado actual da mesma, e empregar recursos tales como documentos
ou dados físicos para realizar a súa labor.
\par
Este proxecto xurde coa idea de crear unha plataforma orientada a xestionar este
tipo de partidas e mellorar a súa experiencia de xogo. O que se pretende é
ofrecer a directores de xogo un programa que manteña os datos do mundo de xogo e
garanta unha consistencia interna, de forma semellante a como fan os MUDs; pero
mantendo o estilo de xogo play-by-post, deixando que a parte software sirva como
apoio na partida e non como base da mesma. Neste sentido, os xogadores seguirían
escribindo coas súas palabras as decisións dos seus personaxes, a diferencia do
MUD onde os xogadores executan código directamente; e sería o director de xogo o
encargado de executar o código pertinente e redactar a resolución das accións
dos xogadores para que estes podan lela.
\par
Á marxe do uso deste sistema como ferramenta de ocio, tamén pode ter outras
implicacións positivas, tales como o seu uso con fins didácticos. Neste sentido
podemos ver dúas posibles aplicacións do sistema: facilitar o achegamento dos
xogos de rol na educación, como xa se probou na práctica \cite{rpgensino} polo
seu fomento do traballo en equipo e a mellora de habilidades sociais e
resolución de problemas; ou achegar o mundo da programación informática aos
usuarios de rol, debido ao contacto cunha linguaxe de script fácil de entender.

\section{Obxectivos xerais}
O obxectivo deste traballo é o de deseñar e implementar unha ferramenta software
que facilite a dirección de partidas de rol asíncrono en liña, empregando para
isto unha linguaxe de script propia, é dicir:
\begin{itemize}
  \item Definir unha linguaxe formal que permita ao usuario crear un mundo virtual
  mediante a especificación de obxectos distintos cos seus atributos, entre eles
  os obxectos que representen aos propios personaxes dos xogadores, ademais de
  permitir definir interaccións preprogramadas entre os propios obxectos. Esta
  linguaxe debe estar orientada ao xogo de rol, polo que terá en conta elementos
  clave neste contexto: escenarios (habitacións), visibilidade ou ocultación das
  accións e sucesos, cálculos para comprobar o resultado das accións, etc.
  \item Implementar dita linguaxe formal mediante un intérprete de script.
  \item Deseñar unha base de datos que dote de persistencia ao mundo virtual.
  \item Deseñar unha interface web para interactuar co sistema de tal modo que o
  director de xogo poda empregar a linguaxe de script directamente; os
  xogadores pola contra só precisan dunha caixa de texto para explicarlle ao
  director as accións que desexan realizar, quedando nas mans deste a
  interacción co mundo interno.
\end{itemize}

\section{Resumo da memoria}
O proxecto seguirá unha metodoloxía de desenvolvemento áxil, polo que a maior
parte da documentación obterase a partir de comentarios no propio código. A
maiores incluiranse documentación adicional como diagramas de clases
ou diagramas entidade-relación. O documento a partir de aquí está dividido nos
seguintes capítulos:
\begin{itemize}
  \item O capítulo 2 contén a planificación do proxecto, tanto os recursos
  necesarios como a propia planificación temporal.
  \item O capítulo 3 é o destinado á especificación de requisitos:
  definicións, casos de uso, e a lista de requisitos obtidos.
  \item O capítulo 4 referirase ao deseño do sistema, dende a interrelación dos
  distintos compoñentes á descrición en detalle do seu funcionamento.
\end{itemize}